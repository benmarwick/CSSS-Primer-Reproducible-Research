Reproducible Research: A primer for the social sciences
========================================================
author: Ben Marwick
date: February 2014



Motivations
========================================================

>"An article about computational result is advertising, not scholarship. The actual scholarship is the full software environment, code and data, that produced the result." <small>- Claerbout and Karrenbach, Proceedings of the 62nd Annual International Meeting of the Society of Exploration Geophysics. 1992</small>

>"When we publish articles containing figures which were generated by computer, we also publish the complete software environment which generates the figures" <small>- Buckheit & Donoho, Wavelab and Reproducible Research, 1995.</small>


Yields & Restrictions
=======================================================
- Verification: easier to find and fix bugs
- Transparency: leads increased citation count, broader impact
- Efficiency: via de-duplication of effort

***

- Classified or sensitive data
- Nondisclosure agreements
- Software licensing issues


Spectrum of reproducibility
=======================================================
![alt text](figures/peng-spectrum.jpg)
<small>Peng 2011, Science 334(6060) pp. 1226-1227</small>

Research pipeline
=======================================================
![alt text](figures/peng-pipeline.jpg)
<small>http://www.stodden.net/AMP2011/slides/pengslides.pdf</small>



Click trails are ephemeral 
========================================================
- GUIs and copy-paste are bad for reproducibility 
- A lot of manual & ad hoc data handling
- Leaves no trace
- Difficult to document
- Difficult to remember

***



```r
summary(cars)
```

```
     speed           dist    
 Min.   : 4.0   Min.   :  2  
 1st Qu.:12.0   1st Qu.: 26  
 Median :15.0   Median : 36  
 Mean   :15.4   Mean   : 43  
 3rd Qu.:19.0   3rd Qu.: 56  
 Max.   :25.0   Max.   :120  
```


Scripted analyses endure
========================================================
Plain text files and UTF-8 encoding will be readable for a long time

***

![alt text](figures/open-science.png)

Literate statistical programming 
========================================================
>"Instead of imagining that our main task is to instruct a computer what to do, let us concentrate rather on explaining to humans what we want the computer to do."-- Donald E. Knuth, Literate Programming, 1984

***

For example...
Let's calculate the current time in R.

```r
time <- format(Sys.time(), "%a %b %d %X %Y")
```

The text and R code are interwoven in the output:

The time is `` `r time` ``

The time is Fri Feb 14 2:32:55 AM 2014

Advantages and disadvantages
========================================================
Advantages of switching to literate programming
- Text and code all in one place, in logical order
- Data, results automatically updated to reflect external changes
- Automatic test when building document

Some disadvantages
- Text and code all in one place; can be hard to read sometimes, especially if there is a lot of code
- Can substantially slow down the processing of documents
(although caching can help)

Need a programming language
========================================================
Machine-readable

R: Free, open source, cross-platform, huge user community

R packages: the ideal 'Compendium'

![alt text](figures/r-project.jpg)

***

>both a container for the different elements that make up the document and its computations (i.e. text, code, data, etc.), and as a means for distributing, managing and updating the collection... allow us to move from an era of advertisement to one where our scholarship itself is published <small>- Gentleman and Temple Lang 2004</small>

========================================================
Very low barrier to documentation of code with roxygen2

![alt text](figures/packages.png)

Need a document formatting language
========================================================
Human-readable

Markdown

R Markdown

***

![alt text](figures/markdown.png)


One package to rule them all
========================================================
knitr - descendant of Sweave

![alt text](figures/knitr.png)

***

'dynamic documents' put narrative and code in the same location

When data or narrative are updated, the document is automatically updated


Version control
========================================================
>Payoffs

- Eases collaboration
- Can track changes in any file type, and who made them
- Can revert file to any point in its tracked history

>Costs

- 2-3 days to learn
- Takes a long time to master

***

![alt text](figures/git.png)
![alt text](figures/github.png)
![alt text](figures/bitbucket.png)

Environment for reproducible research
========================================================
RStudio has integrated R console, support for markdown and git

RStudio 'projects' make version control trivial

***

![alt text](figures/rstudio.png)


Interactive charts in the browser with the rCharts package
========================================================


The Hierarchy of Code Reproducibility
========================================================
- Good: Use an integrated development environment (IDE). Keep your code in one place, let it do what itÂ’s supposed to. (RStudio)
- Better: Use version control. Help yourself keep track of changes, fix bugs and improve project management (Git & GitHub or BitBucket)
- Best: Use embedded code. Explicitly link code and text, save yourself time, save reviewers time, improve your code. (R Markdown & knitr)


Releasing output into the wild
========================================================
pandoc

A universal document converter

Easily convert markdown file to many formats (HTML, PDF, DOCX, etc)

***

Depositing Paper, code and data
========================================================
>Payoffs

- Free space for hosting
- Assignment of persistent DOIs
- Tracking citation metrics (FigShare, ORCID)

>Costs

- Sometimes license restrictions
- Limited or no private storage space

***
![alt text](figures/figshare.png)
![alt text](figures/dryad.png)

Ongoing problems
========================================================
- Reproducing big data and supercomputing research is hard
- Making sure that source code works on other people's computers
is hard
- Keeping detailed enough records is hard

Changing the culture and reward structure
========================================================


Colophon
========================================================
Presentation written in Markdown

Compiled into HTML using RStudio

Source code hosting:
http://github.com/benmarwick/

FigShare DOI:

ORCID: http://orcid.org/0000-0001-7879-4531

Licensing: 

* Presentation: CC-BY-3.0 

* Source code: MIT 


References
========================================================
See markdown file for full references



